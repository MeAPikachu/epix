--
-------------------------------------------------------------------------------------------
-- Copyright © 2010, Xilinx, Inc.
-- This file contains confidential and proprietary information of Xilinx, Inc. and is
-- protected under U.S. and international copyright and other intellectual property laws.
-------------------------------------------------------------------------------------------
--
-- Disclaimer:
-- This disclaimer is not a license and does not grant any rights to the materials
-- distributed herewith. Except as otherwise provided in a valid license issued to
-- you by Xilinx, and to the maximum extent permitted by applicable law: (1) THESE
-- MATERIALS ARE MADE AVAILABLE "AS IS" AND WITH ALL FAULTS, AND XILINX HEREBY
-- DISCLAIMS ALL WARRANTIES AND CONDITIONS, EXPRESS, IMPLIED, OR STATUTORY,
-- INCLUDING BUT NOT LIMITED TO WARRANTIES OF MERCHANTABILITY, NON-INFRINGEMENT,
-- OR FITNESS FOR ANY PARTICULAR PURPOSE; and (2) Xilinx shall not be liable
-- (whether in contract or tort, including negligence, or under any other theory
-- of liability) for any loss or damage of any kind or nature related to, arising
-- under or in connection with these materials, including for any direct, or any
-- indirect, special, incidental, or consequential loss or damage (including loss
-- of data, profits, goodwill, or any type of loss or damage suffered as a result
-- of any action brought by a third party) even if such damage or loss was
-- reasonably foreseeable or Xilinx had been advised of the possibility of the same.
--
-- CRITICAL APPLICATIONS
-- Xilinx products are not designed or intended to be fail-safe, or for use in any
-- application requiring fail-safe performance, such as life-support or safety
-- devices or systems, Class III medical devices, nuclear facilities, applications
-- related to the deployment of airbags, or any other applications that could lead
-- to death, personal injury, or severe property or environmental damage
-- (individually and collectively, "Critical Applications"). Customer assumes the
-- sole risk and liability of any use of Xilinx products in Critical Applications,
-- subject only to applicable laws and regulations governing limitations on product
-- liability.
--
-- THIS COPYRIGHT NOTICE AND DISCLAIMER MUST BE RETAINED AS PART OF THIS FILE AT ALL TIMES.
--
-------------------------------------------------------------------------------------------
--
--
-- Definition of a BlockRAM and JTAG Loader 6 instantiation for KCPSM3 program 
-- defined by EpixStartupCode.psm
-- Version 6.00
--
-- Generated by KCPSM3 Assembler 2014-10-02 09:39:44.835916. 
--
-- Standard IEEE libraries
--
library IEEE;
use IEEE.STD_LOGIC_1164.ALL;
use IEEE.STD_LOGIC_ARITH.ALL;
use IEEE.STD_LOGIC_UNSIGNED.ALL;
--
-- The Unisim Library is used to define Xilinx primitives. It is also used during
-- simulation. The source can be viewed at %XILINX%\vhdl\src\unisims\unisim_VCOMP.vhd
--  
library unisim;
use unisim.vcomponents.all;
--
--
entity EpixStartupCode is
  generic(
  C_JTAG_LOADER_DISABLE : integer := 0;
               C_FAMILY : string := "VIRTEX5");
    Port (      address : in std_logic_vector(9 downto 0);
            instruction : out std_logic_vector(17 downto 0);
            debug_reset : out std_logic;
                    clk : in std_logic
                    );
    end EpixStartupCode;
--
architecture low_level_definition of EpixStartupCode is
--
  component jtag_loader_6
  generic(
                      C_JTAG_LOADER_DISABLE : integer := 0;
	                           C_FAMILY : string := "VIRTEX5";
	                    C_NUM_PICOBLAZE : integer := 1;
	              C_BRAM_MAX_ADDR_WIDTH : integer := 10;
	 C_PICOBLAZE_INSTRUCTION_DATA_WIDTH : integer := 18;
	                       C_JTAG_CHAIN : integer := 2;
	                     C_ADDR_WIDTH_0 : integer := 10;
	                     C_ADDR_WIDTH_1 : integer := 10;
	                     C_ADDR_WIDTH_2 : integer := 10;
	                     C_ADDR_WIDTH_3 : integer := 10;
	                     C_ADDR_WIDTH_4 : integer := 10;
	                     C_ADDR_WIDTH_5 : integer := 10;
	                     C_ADDR_WIDTH_6 : integer := 10;
	                     C_ADDR_WIDTH_7 : integer := 10);
    port(

    picoblaze_reset : out std_logic_vector(C_NUM_PICOBLAZE-1 downto 0);
            jtag_en : out std_logic_vector(C_NUM_PICOBLAZE-1 downto 0);
           jtag_din : out STD_LOGIC_VECTOR(C_PICOBLAZE_INSTRUCTION_DATA_WIDTH-1 downto 0);
          jtag_addr : out STD_LOGIC_VECTOR(C_BRAM_MAX_ADDR_WIDTH-1 downto 0);
           jtag_clk : out std_logic;
            jtag_we : out std_logic;
        jtag_dout_0 : in STD_LOGIC_VECTOR(C_PICOBLAZE_INSTRUCTION_DATA_WIDTH-1 downto 0);
        jtag_dout_1 : in STD_LOGIC_VECTOR(C_PICOBLAZE_INSTRUCTION_DATA_WIDTH-1 downto 0);
        jtag_dout_2 : in STD_LOGIC_VECTOR(C_PICOBLAZE_INSTRUCTION_DATA_WIDTH-1 downto 0);
        jtag_dout_3 : in STD_LOGIC_VECTOR(C_PICOBLAZE_INSTRUCTION_DATA_WIDTH-1 downto 0);
        jtag_dout_4 : in STD_LOGIC_VECTOR(C_PICOBLAZE_INSTRUCTION_DATA_WIDTH-1 downto 0);
        jtag_dout_5 : in STD_LOGIC_VECTOR(C_PICOBLAZE_INSTRUCTION_DATA_WIDTH-1 downto 0);
        jtag_dout_6 : in STD_LOGIC_VECTOR(C_PICOBLAZE_INSTRUCTION_DATA_WIDTH-1 downto 0);
        jtag_dout_7 : in STD_LOGIC_VECTOR(C_PICOBLAZE_INSTRUCTION_DATA_WIDTH-1 downto 0));
    end component;
	
    signal jtag_addr                             : std_logic_vector(9 downto 0);
    signal jtag_we, jtag_clk                     : std_logic;
    signal jtag_din, jtag_dout, jtag_dout_1      : std_logic_vector(17 downto 0);
    signal jtag_en, picoblaze_reset              : std_logic_vector(0 downto 0);
    signal debug_reset_bus                       : std_logic_vector(0 downto 0);
	

begin
--
dual_port_ram_with_debug_generate : if (C_JTAG_LOADER_DISABLE = 0) generate
  --Instantiate the Xilinx primitive for a Dual Port block RAM and JTAG Loader instance
  ram_1024_x_18: RAMB16_S18_S18
  --INIT values repeated to define contents for functional simulation
  generic map ( INIT_00 => X"54114400006150124400005800CE0034003F00260022001D00175C0020014004",
                INIT_01 => X"014501010026A000017D0145010300080A004000013B0127011C0080DA404009",
                INIT_02 => X"02FF01450100001E0185011402FF01450107001EA000014501070008A000017D",
                INIT_03 => X"0B1340358201B0004202014F010100FF014F010C000D0200A000017D01850114",
                INIT_04 => X"B0004B026B000145610290B06B000060EB020B13EB01EB000B00EB07EB06EB05",
                INIT_05 => X"14B09BC06C129BC06C119BC06C100B004048EB020B13EB018B086B01EB008B01",
                INIT_06 => X"CB01507C4B007BC09CB06B000C0550764B007BC09CB06B006C10EB000B00A000",
                INIT_07 => X"A0000400A00004014063EB008B01507E4B026B00014571C090B06B000060FBC0",
                INIT_08 => X"0B060B060B066B000145610290B06B000060EB12EB11EB10EB03EB02EB000B00",
                INIT_09 => X"40AC50A64D00DDC054944E00CE01AD009CB04B03018B00440EFF0D000C00CB04",
                INIT_0A => X"6B0250A04B006B0340A0EB036B0254A04B006B034087EB028B0150BA4B256B02",
                INIT_0B => X"FBC00B019CB00C101DB06B0040C5014511C090B06B0000600C0E9CB06C03CB01",
                INIT_0C => X"EB010B004087EB03EB020B00EB008B01B0004B026B00EB0100006B01B0004D02",
                INIT_0D => X"00440EFF0D000C00CB046B010145610290B06B010063EB12EB11EB10EB03EB02",
                INIT_0E => X"EB028B0151054B256B0240F750F14D00DDC054DF4E00CE01AD009CB04B03018B",
                INIT_0F => X"00630C0E9CB06C03CB016B0250EB4B006B0340EBEB036B0254EB4B006B0340D5",
                INIT_10 => X"B0004D02FBC00B019CB00C101DB00B0E0B0E0B0E6B014113014511C090B06B01",
                INIT_11 => X"014F0100000D020040D5EB03EB020B00EB018B01B0004B136B01EB0100006B01",
                INIT_12 => X"11354400015E090008010200014501040028411D8201B0004202014F010100FF",
                INIT_13 => X"4004C020D0A00A060001A00001451190000DA000D980412D0806820151374203",
                INIT_14 => X"C001A000DA40016AC2100203C208C2040200C102C001A000C0200000593F000E",
                INIT_15 => X"C1010100A000DA40016AC3100303C3080300C304C3800306030603061320C102",
                INIT_16 => X"AC00AB00830103000C000B00A000016AC3100303C3040300C108D1200180C102",
                INIT_17 => X"B0004300034041760301A000D4301400C110010003005D6D000E4000517B4C08",
                INIT_18 => X"E030418BC001B00040004185C101018B1020B0004100417EC301018502FF01FF",
                INIT_19 => X"0000000000000000000000000000A0006333623261316030A000E333E232E131",
                INIT_1A => X"0000000000000000000000000000000000000000000000000000000000000000",
                INIT_1B => X"0000000000000000000000000000000000000000000000000000000000000000",
                INIT_1C => X"0000000000000000000000000000000000000000000000000000000000000000",
                INIT_1D => X"0000000000000000000000000000000000000000000000000000000000000000",
                INIT_1E => X"0000000000000000000000000000000000000000000000000000000000000000",
                INIT_1F => X"0000000000000000000000000000000000000000000000000000000000000000",
                INIT_20 => X"0000000000000000000000000000000000000000000000000000000000000000",
                INIT_21 => X"0000000000000000000000000000000000000000000000000000000000000000",
                INIT_22 => X"0000000000000000000000000000000000000000000000000000000000000000",
                INIT_23 => X"0000000000000000000000000000000000000000000000000000000000000000",
                INIT_24 => X"0000000000000000000000000000000000000000000000000000000000000000",
                INIT_25 => X"0000000000000000000000000000000000000000000000000000000000000000",
                INIT_26 => X"0000000000000000000000000000000000000000000000000000000000000000",
                INIT_27 => X"0000000000000000000000000000000000000000000000000000000000000000",
                INIT_28 => X"0000000000000000000000000000000000000000000000000000000000000000",
                INIT_29 => X"0000000000000000000000000000000000000000000000000000000000000000",
                INIT_2A => X"0000000000000000000000000000000000000000000000000000000000000000",
                INIT_2B => X"0000000000000000000000000000000000000000000000000000000000000000",
                INIT_2C => X"0000000000000000000000000000000000000000000000000000000000000000",
                INIT_2D => X"0000000000000000000000000000000000000000000000000000000000000000",
                INIT_2E => X"0000000000000000000000000000000000000000000000000000000000000000",
                INIT_2F => X"0000000000000000000000000000000000000000000000000000000000000000",
                INIT_30 => X"0000000000000000000000000000000000000000000000000000000000000000",
                INIT_31 => X"0000000000000000000000000000000000000000000000000000000000000000",
                INIT_32 => X"0000000000000000000000000000000000000000000000000000000000000000",
                INIT_33 => X"0000000000000000000000000000000000000000000000000000000000000000",
                INIT_34 => X"0000000000000000000000000000000000000000000000000000000000000000",
                INIT_35 => X"0000000000000000000000000000000000000000000000000000000000000000",
                INIT_36 => X"0000000000000000000000000000000000000000000000000000000000000000",
                INIT_37 => X"0000000000000000000000000000000000000000000000000000000000000000",
                INIT_38 => X"0000000000000000000000000000000000000000000000000000000000000000",
                INIT_39 => X"0000000000000000000000000000000000000000000000000000000000000000",
                INIT_3A => X"0000000000000000000000000000000000000000000000000000000000000000",
                INIT_3B => X"0000000000000000000000000000000000000000000000000000000000000000",
                INIT_3C => X"0000000000000000000000000000000000000000000000000000000000000000",
                INIT_3D => X"0000000000000000000000000000000000000000000000000000000000000000",
                INIT_3E => X"0000000000000000000000000000000000000000000000000000000000000000",
                INIT_3F => X"0000000000000000000000000000000000000000000000000000000000000000",    
               INITP_00 => X"88E74C42744344221110E24993108A2A3670C0BC30C30B0BC2F03FF3DF7FFFF4",
               INITP_01 => X"244D38D39D3D3553008C42AA8E899209840F109134E34E74F4D54C02A8C42AA8",
               INITP_02 => X"9320838D540B888288E222A2A38A2A8E222C239DDC0C3670C0E899209842A3C4",
               INITP_03 => X"000000000000000000000000000000000000000000000000000200AAB6772770",
               INITP_04 => X"0000000000000000000000000000000000000000000000000000000000000000",
               INITP_05 => X"0000000000000000000000000000000000000000000000000000000000000000",
               INITP_06 => X"0000000000000000000000000000000000000000000000000000000000000000",
               INITP_07 => X"0000000000000000000000000000000000000000000000000000000000000000")
  port map(    DIB => "0000000000000000",
              DIPB => "00",
               ENB => '1',
               WEB => '0',
              SSRB => '0',
              CLKB => clk,
             ADDRB => address,
               DOB => instruction(15 downto 0),
              DOPB => instruction(17 downto 16),
               DIA => jtag_din(15 downto 0),
              DIPA => jtag_din(17 downto 16),
               ENA => jtag_en(0),
               WEA => jtag_we,
              SSRA => '0',
              CLKA => jtag_clk,
             ADDRA => jtag_addr,
               DOA => jtag_dout(15 downto 0),
              DOPA => jtag_dout(17 downto 16)
              ); 
				  
  jtag_loader_6_inst : jtag_loader_6
    generic map(     C_FAMILY => C_FAMILY,
              C_NUM_PICOBLAZE => 1,
        C_JTAG_LOADER_DISABLE => C_JTAG_LOADER_DISABLE)
    port map( picoblaze_reset => debug_reset_bus,
                      jtag_en => jtag_en,
                     jtag_din => jtag_din,
                    jtag_addr => jtag_addr,
                     jtag_clk => jtag_clk,
                      jtag_we => jtag_we,
                  jtag_dout_0 => jtag_dout,
                  jtag_dout_1 => jtag_dout, -- ports 1-7 are not used
                  jtag_dout_2 => jtag_dout, -- in a 1 device debug 
                  jtag_dout_3 => jtag_dout, -- session.  However, Synplify
                  jtag_dout_4 => jtag_dout, -- etc require all ports are
                  jtag_dout_5 => jtag_dout, -- connected
                  jtag_dout_6 => jtag_dout,
                  jtag_dout_7 => jtag_dout                                                                                          						
						);	
debug_reset <= debug_reset_bus(0);						

end generate;


single_port_ram_no_debug_generate : if (C_JTAG_LOADER_DISABLE = 1) generate
  
  --Instantiate the Xilinx primitive for a Single Port block RAM and no JTAG Loader instance
  ram_1024_x_18: RAMB16_S18
  generic map ( INIT_00 => X"54114400006150124400005800CE0034003F00260022001D00175C0020014004",
                INIT_01 => X"014501010026A000017D0145010300080A004000013B0127011C0080DA404009",
                INIT_02 => X"02FF01450100001E0185011402FF01450107001EA000014501070008A000017D",
                INIT_03 => X"0B1340358201B0004202014F010100FF014F010C000D0200A000017D01850114",
                INIT_04 => X"B0004B026B000145610290B06B000060EB020B13EB01EB000B00EB07EB06EB05",
                INIT_05 => X"14B09BC06C129BC06C119BC06C100B004048EB020B13EB018B086B01EB008B01",
                INIT_06 => X"CB01507C4B007BC09CB06B000C0550764B007BC09CB06B006C10EB000B00A000",
                INIT_07 => X"A0000400A00004014063EB008B01507E4B026B00014571C090B06B000060FBC0",
                INIT_08 => X"0B060B060B066B000145610290B06B000060EB12EB11EB10EB03EB02EB000B00",
                INIT_09 => X"40AC50A64D00DDC054944E00CE01AD009CB04B03018B00440EFF0D000C00CB04",
                INIT_0A => X"6B0250A04B006B0340A0EB036B0254A04B006B034087EB028B0150BA4B256B02",
                INIT_0B => X"FBC00B019CB00C101DB06B0040C5014511C090B06B0000600C0E9CB06C03CB01",
                INIT_0C => X"EB010B004087EB03EB020B00EB008B01B0004B026B00EB0100006B01B0004D02",
                INIT_0D => X"00440EFF0D000C00CB046B010145610290B06B010063EB12EB11EB10EB03EB02",
                INIT_0E => X"EB028B0151054B256B0240F750F14D00DDC054DF4E00CE01AD009CB04B03018B",
                INIT_0F => X"00630C0E9CB06C03CB016B0250EB4B006B0340EBEB036B0254EB4B006B0340D5",
                INIT_10 => X"B0004D02FBC00B019CB00C101DB00B0E0B0E0B0E6B014113014511C090B06B01",
                INIT_11 => X"014F0100000D020040D5EB03EB020B00EB018B01B0004B136B01EB0100006B01",
                INIT_12 => X"11354400015E090008010200014501040028411D8201B0004202014F010100FF",
                INIT_13 => X"4004C020D0A00A060001A00001451190000DA000D980412D0806820151374203",
                INIT_14 => X"C001A000DA40016AC2100203C208C2040200C102C001A000C0200000593F000E",
                INIT_15 => X"C1010100A000DA40016AC3100303C3080300C304C3800306030603061320C102",
                INIT_16 => X"AC00AB00830103000C000B00A000016AC3100303C3040300C108D1200180C102",
                INIT_17 => X"B0004300034041760301A000D4301400C110010003005D6D000E4000517B4C08",
                INIT_18 => X"E030418BC001B00040004185C101018B1020B0004100417EC301018502FF01FF",
                INIT_19 => X"0000000000000000000000000000A0006333623261316030A000E333E232E131",
                INIT_1A => X"0000000000000000000000000000000000000000000000000000000000000000",
                INIT_1B => X"0000000000000000000000000000000000000000000000000000000000000000",
                INIT_1C => X"0000000000000000000000000000000000000000000000000000000000000000",
                INIT_1D => X"0000000000000000000000000000000000000000000000000000000000000000",
                INIT_1E => X"0000000000000000000000000000000000000000000000000000000000000000",
                INIT_1F => X"0000000000000000000000000000000000000000000000000000000000000000",
                INIT_20 => X"0000000000000000000000000000000000000000000000000000000000000000",
                INIT_21 => X"0000000000000000000000000000000000000000000000000000000000000000",
                INIT_22 => X"0000000000000000000000000000000000000000000000000000000000000000",
                INIT_23 => X"0000000000000000000000000000000000000000000000000000000000000000",
                INIT_24 => X"0000000000000000000000000000000000000000000000000000000000000000",
                INIT_25 => X"0000000000000000000000000000000000000000000000000000000000000000",
                INIT_26 => X"0000000000000000000000000000000000000000000000000000000000000000",
                INIT_27 => X"0000000000000000000000000000000000000000000000000000000000000000",
                INIT_28 => X"0000000000000000000000000000000000000000000000000000000000000000",
                INIT_29 => X"0000000000000000000000000000000000000000000000000000000000000000",
                INIT_2A => X"0000000000000000000000000000000000000000000000000000000000000000",
                INIT_2B => X"0000000000000000000000000000000000000000000000000000000000000000",
                INIT_2C => X"0000000000000000000000000000000000000000000000000000000000000000",
                INIT_2D => X"0000000000000000000000000000000000000000000000000000000000000000",
                INIT_2E => X"0000000000000000000000000000000000000000000000000000000000000000",
                INIT_2F => X"0000000000000000000000000000000000000000000000000000000000000000",
                INIT_30 => X"0000000000000000000000000000000000000000000000000000000000000000",
                INIT_31 => X"0000000000000000000000000000000000000000000000000000000000000000",
                INIT_32 => X"0000000000000000000000000000000000000000000000000000000000000000",
                INIT_33 => X"0000000000000000000000000000000000000000000000000000000000000000",
                INIT_34 => X"0000000000000000000000000000000000000000000000000000000000000000",
                INIT_35 => X"0000000000000000000000000000000000000000000000000000000000000000",
                INIT_36 => X"0000000000000000000000000000000000000000000000000000000000000000",
                INIT_37 => X"0000000000000000000000000000000000000000000000000000000000000000",
                INIT_38 => X"0000000000000000000000000000000000000000000000000000000000000000",
                INIT_39 => X"0000000000000000000000000000000000000000000000000000000000000000",
                INIT_3A => X"0000000000000000000000000000000000000000000000000000000000000000",
                INIT_3B => X"0000000000000000000000000000000000000000000000000000000000000000",
                INIT_3C => X"0000000000000000000000000000000000000000000000000000000000000000",
                INIT_3D => X"0000000000000000000000000000000000000000000000000000000000000000",
                INIT_3E => X"0000000000000000000000000000000000000000000000000000000000000000",
                INIT_3F => X"0000000000000000000000000000000000000000000000000000000000000000",    
               INITP_00 => X"88E74C42744344221110E24993108A2A3670C0BC30C30B0BC2F03FF3DF7FFFF4",
               INITP_01 => X"244D38D39D3D3553008C42AA8E899209840F109134E34E74F4D54C02A8C42AA8",
               INITP_02 => X"9320838D540B888288E222A2A38A2A8E222C239DDC0C3670C0E899209842A3C4",
               INITP_03 => X"000000000000000000000000000000000000000000000000000200AAB6772770",
               INITP_04 => X"0000000000000000000000000000000000000000000000000000000000000000",
               INITP_05 => X"0000000000000000000000000000000000000000000000000000000000000000",
               INITP_06 => X"0000000000000000000000000000000000000000000000000000000000000000",
               INITP_07 => X"0000000000000000000000000000000000000000000000000000000000000000")
  port map(    DI => "0000000000000000",
              DIP => "00",
               EN => '1',
               WE => '0',
              SSR => '0',
              CLK => clk,
             ADDR => address,
               DO => instruction(15 downto 0),
              DOP => instruction(17 downto 16)); 
              
              debug_reset <= '0';
end generate;
--
end low_level_definition;
--
------------------------------------------------------------------------------------
--
-- END OF FILE EpixStartupCode.vhd
--
------------------------------------------------------------------------------------

